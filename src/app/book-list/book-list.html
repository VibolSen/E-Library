<div class="container mx-auto p-6">
    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="flex justify-center py-16">
        <app-spinner></app-spinner>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative" role="alert">
        <strong class="font-bold">Error:</strong>
        <span class="block sm:inline">{{ error }}</span>
    </div>

    <!-- Main Content (Search and Grid) -->
    <div *ngIf="!isLoading && !error">
        <!-- Search Bar -->
        <div class="mb-8">
            <input type="text" placeholder="Search by title or author..."
                class="w-full p-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                [(ngModel)]="searchTerm">
        </div>

        <!-- Container to check for search results -->
        <ng-container *ngIf="(books | searchFilter:searchTerm) as filteredBooks">
            <!-- If books are found, show the grid -->
            <div *ngIf="filteredBooks.length > 0; else noResults"
                class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <a *ngFor="let book of filteredBooks" [routerLink]="['/book', book.id]">
                    <app-book-card [book]="book"></app-book-card>
                </a>
            </div>

            <!-- Template to show if search finds no results -->
            <ng-template #noResults>
                <div class="text-center py-16">
                    <h2 class="text-2xl font-semibold text-gray-700">No Books Found</h2>
                    <p class="text-gray-500 mt-2">Try adjusting your search terms or check back later.</p>
                </div>
            </ng-template>
        </ng-container>
    </div>
</div>