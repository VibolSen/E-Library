<!-- If the page is NOT loading, show the main content. Otherwise, show the #loadingBlock template -->
<div *ngIf="!isLoading; else loadingBlock">

    <!-- Search Bar -->
    <div class="mb-8">
        <input type="text" placeholder="Search by title or author..."
            class="w-full p-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
            [(ngModel)]="searchTerm">
    </div>

    <!-- Container to check for search results after filtering -->
    <ng-container *ngIf="(books | searchFilter:searchTerm) as filteredBooks">
        <!-- If there are books in the filtered list, show the grid -->
        <div *ngIf="filteredBooks.length > 0; else noResults"
            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <a *ngFor="let book of filteredBooks" [routerLink]="['/book', book.id]">
                <app-book-card [book]="book"></app-book-card>
            </a>
        </div>
    </ng-container>

    <!-- This is the template to show if the search finds no results -->
    <ng-template #noResults>
        <div class="text-center py-16">
            <h2 class="text-2xl font-semibold text-gray-700">No Books Found</h2>
            <p class="text-gray-500 mt-2">Try adjusting your search terms.</p>
        </div>
    </ng-template>

</div>


<!-- This is the template that will be shown while isLoading is true -->
<ng-template #loadingBlock>
    <div class="py-16">
        <app-spinner></app-spinner>
    </div>
</ng-template>